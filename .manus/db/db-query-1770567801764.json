{
  "query": "CREATE TABLE `backups` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`name` varchar(255),\n\t`description` text,\n\t`size` int,\n\t`rulesCount` int,\n\t`interactionsCount` int,\n\t`backupData` json NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `backups_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `evolutionEvents` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`action` enum('promote','deprecate','tune','create_rule','archive') NOT NULL,\n\t`ruleId` varchar(64),\n\t`ruleName` varchar(255),\n\t`reason` text,\n\t`metrics` json,\n\t`metadata` json,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `evolutionEvents_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `interactions` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`type` varchar(64) NOT NULL,\n\t`description` text NOT NULL,\n\t`outcome` enum('success','failure','partial','unknown') DEFAULT 'unknown',\n\t`context` json,\n\t`duration` int,\n\t`metadata` json,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `interactions_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `patterns` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`type` enum('sequential','temporal','frequency','contextual') NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`description` text,\n\t`confidence` decimal(3,2) NOT NULL,\n\t`occurrences` int DEFAULT 1,\n\t`lastDetected` timestamp NOT NULL DEFAULT (now()),\n\t`patternData` json NOT NULL,\n\t`suggestedRule` json,\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `patterns_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `rules` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`description` text,\n\t`category` enum('safety','productivity','learning','workflow','custom') NOT NULL,\n\t`condition` text NOT NULL,\n\t`behavior` text NOT NULL,\n\t`priority` int NOT NULL DEFAULT 50,\n\t`active` boolean NOT NULL DEFAULT true,\n\t`confidence` decimal(3,2) NOT NULL DEFAULT '0.5',\n\t`successRate` decimal(5,4),\n\t`executionCount` int DEFAULT 0,\n\t`lastExecuted` timestamp,\n\t`shadowMode` boolean DEFAULT false,\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `rules_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `systemStates` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`mode` enum('zero_knowledge','learning','competent','expert','master') DEFAULT 'zero_knowledge',\n\t`maturity` decimal(5,2) NOT NULL DEFAULT '0',\n\t`totalInteractions` int DEFAULT 0,\n\t`activeRules` int DEFAULT 0,\n\t`detectedPatterns` int DEFAULT 0,\n\t`lastEvolutionCycle` timestamp,\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `systemStates_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `systemStates_userId_unique` UNIQUE(`userId`)\n);\nCREATE TABLE `userProfiles` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`role` varchar(64),\n\t`domain` varchar(255),\n\t`goals` text,\n\t`prefersAutomation` boolean DEFAULT false,\n\t`riskTolerance` enum('low','medium','high') DEFAULT 'medium',\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `userProfiles_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `userProfiles_userId_unique` UNIQUE(`userId`)\n);\nCREATE INDEX `backups_userId_idx` ON `backups` (`userId`);\nCREATE INDEX `backups_createdAt_idx` ON `backups` (`createdAt`);\nCREATE INDEX `evolutionEvents_userId_idx` ON `evolutionEvents` (`userId`);\nCREATE INDEX `evolutionEvents_action_idx` ON `evolutionEvents` (`action`);\nCREATE INDEX `evolutionEvents_timestamp_idx` ON `evolutionEvents` (`timestamp`);\nCREATE INDEX `interactions_userId_idx` ON `interactions` (`userId`);\nCREATE INDEX `interactions_type_idx` ON `interactions` (`type`);\nCREATE INDEX `interactions_timestamp_idx` ON `interactions` (`timestamp`);\nCREATE INDEX `patterns_userId_idx` ON `patterns` (`userId`);\nCREATE INDEX `patterns_type_idx` ON `patterns` (`type`);\nCREATE INDEX `patterns_confidence_idx` ON `patterns` (`confidence`);\nCREATE INDEX `rules_userId_idx` ON `rules` (`userId`);\nCREATE INDEX `rules_category_idx` ON `rules` (`category`);\nCREATE INDEX `rules_active_idx` ON `rules` (`active`);\nCREATE INDEX `systemStates_userId_idx` ON `systemStates` (`userId`);\nCREATE INDEX `userProfiles_userId_idx` ON `userProfiles` (`userId`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user pBmrtfEwyi4MwDy.root --database 47XmSUE7XoUPA3jjHJHXu7 --execute CREATE TABLE `backups` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`name` varchar(255),\n\t`description` text,\n\t`size` int,\n\t`rulesCount` int,\n\t`interactionsCount` int,\n\t`backupData` json NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `backups_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `evolutionEvents` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`action` enum('promote','deprecate','tune','create_rule','archive') NOT NULL,\n\t`ruleId` varchar(64),\n\t`ruleName` varchar(255),\n\t`reason` text,\n\t`metrics` json,\n\t`metadata` json,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `evolutionEvents_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `interactions` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`type` varchar(64) NOT NULL,\n\t`description` text NOT NULL,\n\t`outcome` enum('success','failure','partial','unknown') DEFAULT 'unknown',\n\t`context` json,\n\t`duration` int,\n\t`metadata` json,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `interactions_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `patterns` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`type` enum('sequential','temporal','frequency','contextual') NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`description` text,\n\t`confidence` decimal(3,2) NOT NULL,\n\t`occurrences` int DEFAULT 1,\n\t`lastDetected` timestamp NOT NULL DEFAULT (now()),\n\t`patternData` json NOT NULL,\n\t`suggestedRule` json,\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `patterns_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `rules` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`description` text,\n\t`category` enum('safety','productivity','learning','workflow','custom') NOT NULL,\n\t`condition` text NOT NULL,\n\t`behavior` text NOT NULL,\n\t`priority` int NOT NULL DEFAULT 50,\n\t`active` boolean NOT NULL DEFAULT true,\n\t`confidence` decimal(3,2) NOT NULL DEFAULT '0.5',\n\t`successRate` decimal(5,4),\n\t`executionCount` int DEFAULT 0,\n\t`lastExecuted` timestamp,\n\t`shadowMode` boolean DEFAULT false,\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `rules_id` PRIMARY KEY(`id`)\n);\nCREATE TABLE `systemStates` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`mode` enum('zero_knowledge','learning','competent','expert','master') DEFAULT 'zero_knowledge',\n\t`maturity` decimal(5,2) NOT NULL DEFAULT '0',\n\t`totalInteractions` int DEFAULT 0,\n\t`activeRules` int DEFAULT 0,\n\t`detectedPatterns` int DEFAULT 0,\n\t`lastEvolutionCycle` timestamp,\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `systemStates_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `systemStates_userId_unique` UNIQUE(`userId`)\n);\nCREATE TABLE `userProfiles` (\n\t`id` varchar(64) NOT NULL,\n\t`userId` int NOT NULL,\n\t`role` varchar(64),\n\t`domain` varchar(255),\n\t`goals` text,\n\t`prefersAutomation` boolean DEFAULT false,\n\t`riskTolerance` enum('low','medium','high') DEFAULT 'medium',\n\t`metadata` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `userProfiles_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `userProfiles_userId_unique` UNIQUE(`userId`)\n);\nCREATE INDEX `backups_userId_idx` ON `backups` (`userId`);\nCREATE INDEX `backups_createdAt_idx` ON `backups` (`createdAt`);\nCREATE INDEX `evolutionEvents_userId_idx` ON `evolutionEvents` (`userId`);\nCREATE INDEX `evolutionEvents_action_idx` ON `evolutionEvents` (`action`);\nCREATE INDEX `evolutionEvents_timestamp_idx` ON `evolutionEvents` (`timestamp`);\nCREATE INDEX `interactions_userId_idx` ON `interactions` (`userId`);\nCREATE INDEX `interactions_type_idx` ON `interactions` (`type`);\nCREATE INDEX `interactions_timestamp_idx` ON `interactions` (`timestamp`);\nCREATE INDEX `patterns_userId_idx` ON `patterns` (`userId`);\nCREATE INDEX `patterns_type_idx` ON `patterns` (`type`);\nCREATE INDEX `patterns_confidence_idx` ON `patterns` (`confidence`);\nCREATE INDEX `rules_userId_idx` ON `rules` (`userId`);\nCREATE INDEX `rules_category_idx` ON `rules` (`category`);\nCREATE INDEX `rules_active_idx` ON `rules` (`active`);\nCREATE INDEX `systemStates_userId_idx` ON `systemStates` (`userId`);\nCREATE INDEX `userProfiles_userId_idx` ON `userProfiles` (`userId`);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 16368
}