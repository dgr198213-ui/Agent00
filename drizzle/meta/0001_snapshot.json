{
  "version": "5",
  "dialect": "mysql",
  "id": "467abbd7-88be-4e42-bd06-8d9d01bf885e",
  "prevId": "d6c9fbd2-d10a-4358-b4b8-178474c0ccac",
  "tables": {
    "backups": {
      "name": "backups",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "size": {
          "name": "size",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "rulesCount": {
          "name": "rulesCount",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "interactionsCount": {
          "name": "interactionsCount",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "backupData": {
          "name": "backupData",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "backups_userId_idx": {
          "name": "backups_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        },
        "backups_createdAt_idx": {
          "name": "backups_createdAt_idx",
          "columns": [
            "createdAt"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "backups_id": {
          "name": "backups_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "evolutionEvents": {
      "name": "evolutionEvents",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "action": {
          "name": "action",
          "type": "enum('promote','deprecate','tune','create_rule','archive')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ruleId": {
          "name": "ruleId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ruleName": {
          "name": "ruleName",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metrics": {
          "name": "metrics",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "evolutionEvents_userId_idx": {
          "name": "evolutionEvents_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        },
        "evolutionEvents_action_idx": {
          "name": "evolutionEvents_action_idx",
          "columns": [
            "action"
          ],
          "isUnique": false
        },
        "evolutionEvents_timestamp_idx": {
          "name": "evolutionEvents_timestamp_idx",
          "columns": [
            "timestamp"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "evolutionEvents_id": {
          "name": "evolutionEvents_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "interactions": {
      "name": "interactions",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "outcome": {
          "name": "outcome",
          "type": "enum('success','failure','partial','unknown')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'unknown'"
        },
        "context": {
          "name": "context",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "duration": {
          "name": "duration",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "interactions_userId_idx": {
          "name": "interactions_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        },
        "interactions_type_idx": {
          "name": "interactions_type_idx",
          "columns": [
            "type"
          ],
          "isUnique": false
        },
        "interactions_timestamp_idx": {
          "name": "interactions_timestamp_idx",
          "columns": [
            "timestamp"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "interactions_id": {
          "name": "interactions_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "patterns": {
      "name": "patterns",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "enum('sequential','temporal','frequency','contextual')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "confidence": {
          "name": "confidence",
          "type": "decimal(3,2)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "occurrences": {
          "name": "occurrences",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 1
        },
        "lastDetected": {
          "name": "lastDetected",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "patternData": {
          "name": "patternData",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "suggestedRule": {
          "name": "suggestedRule",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "patterns_userId_idx": {
          "name": "patterns_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        },
        "patterns_type_idx": {
          "name": "patterns_type_idx",
          "columns": [
            "type"
          ],
          "isUnique": false
        },
        "patterns_confidence_idx": {
          "name": "patterns_confidence_idx",
          "columns": [
            "confidence"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "patterns_id": {
          "name": "patterns_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "rules": {
      "name": "rules",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "category": {
          "name": "category",
          "type": "enum('safety','productivity','learning','workflow','custom')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "condition": {
          "name": "condition",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "behavior": {
          "name": "behavior",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "priority": {
          "name": "priority",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 50
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "confidence": {
          "name": "confidence",
          "type": "decimal(3,2)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'0.5'"
        },
        "successRate": {
          "name": "successRate",
          "type": "decimal(5,4)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "executionCount": {
          "name": "executionCount",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "lastExecuted": {
          "name": "lastExecuted",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "shadowMode": {
          "name": "shadowMode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "rules_userId_idx": {
          "name": "rules_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        },
        "rules_category_idx": {
          "name": "rules_category_idx",
          "columns": [
            "category"
          ],
          "isUnique": false
        },
        "rules_active_idx": {
          "name": "rules_active_idx",
          "columns": [
            "active"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "rules_id": {
          "name": "rules_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "systemStates": {
      "name": "systemStates",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "mode": {
          "name": "mode",
          "type": "enum('zero_knowledge','learning','competent','expert','master')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'zero_knowledge'"
        },
        "maturity": {
          "name": "maturity",
          "type": "decimal(5,2)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'0'"
        },
        "totalInteractions": {
          "name": "totalInteractions",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "activeRules": {
          "name": "activeRules",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "detectedPatterns": {
          "name": "detectedPatterns",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "lastEvolutionCycle": {
          "name": "lastEvolutionCycle",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "systemStates_userId_idx": {
          "name": "systemStates_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "systemStates_id": {
          "name": "systemStates_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "systemStates_userId_unique": {
          "name": "systemStates_userId_unique",
          "columns": [
            "userId"
          ]
        }
      },
      "checkConstraint": {}
    },
    "userProfiles": {
      "name": "userProfiles",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "domain": {
          "name": "domain",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "goals": {
          "name": "goals",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prefersAutomation": {
          "name": "prefersAutomation",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "riskTolerance": {
          "name": "riskTolerance",
          "type": "enum('low','medium','high')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'medium'"
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "userProfiles_userId_idx": {
          "name": "userProfiles_userId_idx",
          "columns": [
            "userId"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "userProfiles_id": {
          "name": "userProfiles_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "userProfiles_userId_unique": {
          "name": "userProfiles_userId_unique",
          "columns": [
            "userId"
          ]
        }
      },
      "checkConstraint": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "openId": {
          "name": "openId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "loginMethod": {
          "name": "loginMethod",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "enum('user','admin')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'user'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "lastSignedIn": {
          "name": "lastSignedIn",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "users_id": {
          "name": "users_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "users_openId_unique": {
          "name": "users_openId_unique",
          "columns": [
            "openId"
          ]
        }
      },
      "checkConstraint": {}
    }
  },
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {},
    "indexes": {}
  }
}